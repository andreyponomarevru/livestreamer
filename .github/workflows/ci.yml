name: CI

on:
  pull_request:
    branches: 
      - main
  workflow_dispatch:

env:
  API_COMMON_ENV: '${{ secrets.API_COMMON_ENV }}'
  API_DEV_ENV: '${{ secrets.API_DEV_ENV }}'
  API_PROD_ENV: '${{ secrets.API_PROD_ENV }}'
  API_TEST_ENV: '${{ secrets.API_TEST_ENV }}' 
  POSTGRES_COMMON_ENV: '${{ secrets.POSTGRES_COMMON_ENV }}' 
  POSTGRES_DEV_ENV: '${{ secrets.POSTGRES_DEV_ENV }}'
  POSTGRES_PROD_ENV: '${{ secrets.POSTGRES_PROD_ENV }}'
  POSTGRES_TEST_ENV: '${{ secrets.POSTGRES_TEST_ENV }}'    

jobs:

  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout the repo
        uses: actions/checkout@v2
      
      - name: Run Test Build
        run: ./ci.sh
